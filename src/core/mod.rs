// This handles the main loop, device scanning, orchestrating everything